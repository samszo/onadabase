<?xml version="1.0" encoding="ISO-8859-1"?>
<XmlParams>
	<XmlParam nom="MenuUrl">
		<menu nom="Diagnostic">
			<urlDesc nom="Sur la voirie" src="http://localhost/onadabase/overlay/iframe.php?ParamNom=MenuUrl&amp;UrlNom=Sur%20la%20voirie" dst="http://localhost/onadabase/TreeCartOng.php"/>
			<urlDesc nom="Dans des bâtiments (ERP, IOP)" src="http://localhost/mundilogiweb/ieml/overlay/iframe.php?ParamNom=MenuUrl&amp;UrlNom=Processus" dst="http://localhost/mundilogiweb/ieml/processus.php"/>
			<urlDesc nom="Dans les modes de transport en commun" src="http://localhost/mundilogiweb/ieml/overlay/iframe.php?ParamNom=MenuUrl&amp;UrlNom=Processus" dst="http://localhost/mundilogiweb/ieml/processus.php"/>
		</menu>
		<menu nom="Outils">
			<urlDesc nom="Saisie du diagnostic" src="http://localhost/onadabase/overlay/iframe.php?ParamNom=MenuUrl&amp;UrlNom=Saisie du diagnostic" dst="http://localhost/onadabase/SaisiDiag.php"/>
		</menu>
	</XmlParam>
	<XmlParam nom="GetOntoTree">
		<Querys>
			<Query fonction="GetTreeChildren_terre">
				<!-- récupère par rapport au parent les rubriques qui ont un mot clef type de territoire-->
				<col tag="id" parse="Integer"/>
				<col tag="titre"/>
				<select>SELECT r.id_rubrique id, r.titre, r.id_parent parent </select>
				<from> FROM spip_rubriques r
					INNER JOIN spip_mots_rubriques mr ON mr.id_rubrique = r.id_rubrique AND mr.id_mot IN (54,56,57,58,59,60)
				</from>
				<where def="9"> WHERE id_parent = -parent-</where>
				<js evt="onselect" function="GetTreeSelect('tree-param0-',['idRub','libRub'],[0,1]);"/>
			</Query>
			<Query fonction="GetTreeChildren_etab">
				<!-- récupère par rapport au parent les rubriques qui ont une grille information établissement-->
				<col tag="id" parse="Integer"/>
				<col tag="titre"/>
				<select>SELECT r.id_rubrique id, r.titre, r.id_parent parent </select>
				<from> FROM spip_rubriques r
INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
INNER JOIN spip_forms_donnees_articles da ON da.id_article = a.id_article
INNER JOIN spip_forms_donnees d ON d.id_donnee = da.id_donnee AND d.id_form = 55
				</from>
				<where def="9"> WHERE id_parent = -parent-</where>
				<js evt="onselect" function="GetTreeSelect('tree-param0-',['idRub','libRub'],[0,1]);ChargeTabboxFromAjax('idRub','FormSaisi','Etab');"/>
			</Query>
			<Query fonction="GetTreeChildren_espace">
				<col tag="id" parse="Integer"/>
				<col tag="titre"/>
				<select>SELECT r.id_rubrique id, r.titre, r.id_parent parent </select>
				<from> FROM spip_rubriques r
INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
INNER JOIN spip_forms_donnees_articles da ON da.id_article = a.id_article
INNER JOIN spip_forms_donnees d ON d.id_donnee = da.id_donnee AND d.id_form = 56
				</from>
				<where def="9"> WHERE id_parent = -parent-</where>
				<js evt="onselect" function="GetTreeSelect('tree-param0-',['idRub','libRub'],[0,1]);ChargeTabboxFromAjax('idRub','FormSaisi','Espace');"/>
			</Query>
			<Query fonction="GetTreeChildren_bat">
				<col tag="id" parse="Integer"/>
				<col tag="titre"/>
				<select>SELECT r.id_rubrique id, r.titre, r.id_parent parent </select>
				<from> FROM spip_rubriques r
INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
INNER JOIN spip_forms_donnees_articles da ON da.id_article = a.id_article
INNER JOIN spip_forms_donnees d ON d.id_donnee = da.id_donnee AND d.id_form = 53
				</from>
				<where def="9"> WHERE id_parent = -parent-</where>
				<js evt="onselect" function="GetTreeSelect('tree-param0-',['idRub','libRub'],[0,1]);ChargeTabboxFromAjax('idRub','FormSaisi','Bat');"/>
			</Query>
			<Query fonction="GetTreeChildren_niveau">
				<col tag="id" parse="Integer"/>
				<col tag="titre"/>
				<select>SELECT r.id_rubrique id, r.titre, r.id_parent parent </select>
				<from> FROM spip_rubriques r
INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
INNER JOIN spip_forms_donnees_articles da ON da.id_article = a.id_article
INNER JOIN spip_forms_donnees d ON d.id_donnee = da.id_donnee AND d.id_form = 35
				</from>
				<where def="9"> WHERE id_parent = -parent-</where>
				<js evt="onselect" function="GetTreeSelect('tree-param0-',['idRub','libRub'],[0,1]);ChargeTabboxFromAjax('idRub','FormSaisi','Niveau');"/>
			</Query>
			<Query fonction="GetTreeChildren_ascenseur">
				<col tag="id" parse="Integer"/>
				<col tag="titre"/>
				<select>SELECT r.id_rubrique id, r.titre, r.id_parent parent </select>
				<from> FROM spip_rubriques r
INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
INNER JOIN spip_forms_donnees_articles da ON da.id_article = a.id_article
INNER JOIN spip_forms_donnees d ON d.id_donnee = da.id_donnee AND d.id_form = 35
				</from>
				<where def="9"> WHERE id_parent = -parent-</where>
				<js evt="onselect" function="GetTreeSelect('tree-param0-',['idRub','libRub'],[0,1]);ChargeTabboxFromAjax('idRub','FormSaisi','Ascenseur');"/>
			</Query>
			<Query fonction="GetTreeChildren_espaceint">
				<col tag="id" parse="Integer"/>
				<col tag="titre"/>
				<select>SELECT r.id_rubrique id, r.titre, r.id_parent parent </select>
				<from> FROM spip_rubriques r
INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
INNER JOIN spip_forms_donnees_articles da ON da.id_article = a.id_article
INNER JOIN spip_forms_donnees d ON d.id_donnee = da.id_donnee AND d.id_form = 57
				</from>
				<where def="9"> WHERE id_parent = -parent-</where>
				<js evt="onselect" function="GetTreeSelect('tree-param0-',['idRub','libRub'],[0,1]);ChargeTabboxFromAjax('idRub','FormSaisi','EspaceInt');"/>
			</Query>
			<Query fonction="GetTreeChildren_espacegen">
				<col tag="id" parse="Integer"/>
				<col tag="titre"/>				
				<select>SELECT DISTINCT r.id_rubrique id, r.titre, r.id_parent parent </select>
				<from> 
					FROM spip_rubriques r
					INNER JOIN spip_rubriques rp ON rp.id_rubrique = r.id_parent
					INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
					INNER JOIN spip_forms_donnees_articles fda ON fda.id_article = a.id_article
					INNER JOIN spip_forms_donnees fd ON fd.id_donnee = fda.id_donnee AND fd.id_form =59
				</from>
				<where> WHERE rp.id_parent = -parent- </where>				
				<js evt="onselect" function="GetTreeSelect('tree-param0-',['idRub','libRub'],[0,1]);ChargeTabboxFromAjax('idRub','FormSaisi','EspaceGen');"/>
			</Query>
			<Query fonction="GetTreeChildren_parcelle">
				<col tag="id" parse="Integer"/>
				<col tag="titre"/>
				<select>SELECT r.id_rubrique id, r.titre, r.id_parent parent </select>
				<from> FROM spip_rubriques r
INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
INNER JOIN spip_forms_donnees_articles da ON da.id_article = a.id_article
INNER JOIN spip_forms_donnees d ON d.id_donnee = da.id_donnee AND d.id_form = 58
				</from>
				<where def="9"> WHERE r.id_parent = -parent-</where>
				<js evt="onselect" function="GetTreeSelect('tree-param0-',['idRub','libRub'],[0,1]);ChargeTabboxFromAjax('idRub','FormSaisi','Parcelle');"/>
			</Query>
			<Query fonction="GetTreeChildren_porte">
				<col tag="id" parse="Integer"/>
				<col tag="titre"/>
				<select>SELECT DISTINCT r.id_rubrique id, r.titre, r.id_parent parent </select>
				<from> FROM spip_rubriques r
INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
INNER JOIN spip_forms_donnees_articles da ON da.id_article = a.id_article
INNER JOIN spip_forms_donnees d ON d.id_donnee = da.id_donnee AND d.id_form = 59
				</from>
				<where def="9"> WHERE r.id_parent = -parent-</where>
				<js evt="onselect" function="GetTreeSelect('tree-param0-',['idRub','libRub'],[0,1]);ChargeTabboxFromAjax('idRub','FormSaisi','porte');"/>
			</Query>
			<Query fonction="GetTreeChildren_espaceext">
				<col tag="id" parse="Integer"/>
				<col tag="titre"/>				
				<select>SELECT r.id_rubrique id, r.titre, r.id_parent parent </select>
				<from> FROM spip_rubriques r
INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
INNER JOIN spip_forms_donnees_articles da ON da.id_article = a.id_article
INNER JOIN spip_forms_donnees d ON d.id_donnee = da.id_donnee AND d.id_form = 61
				</from>
				<where> WHERE id_parent = -parent- </where>				
				<js evt="onselect" function="GetTreeSelect('tree-param0-',['idRub','libRub'],[0,1]);ChargeTabboxFromAjax('idRub','FormSaisi','EspaceExt');"/>
			</Query>
			<Query fonction="GetTreeChildren_espaceextparamgen">
				<col tag="id" parse="Integer"/>
				<col tag="titre"/>				
				<select>SELECT r.id_rubrique id, r.titre, r.id_parent parent </select>
				<from> FROM spip_rubriques r
INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
INNER JOIN spip_forms_donnees_articles da ON da.id_article = a.id_article
INNER JOIN spip_forms_donnees d ON d.id_donnee = da.id_donnee AND d.id_form = 61
				</from>
				<where> WHERE id_parent = -parent- </where>				
				<js evt="onselect" function="GetTreeSelect('tree-param0-',['idRub','libRub'],[0,1]);ChargeTabboxFromAjax('idRub','FormSaisi','EspaceExt');"/>
			</Query>
			<Query fonction="GetTreeChildren_objet">
				<col tag="id" parse="Integer"/>
				<col tag="titre"/>
				<col tag="parent" hidden="true"/>
				<select>SELECT id_rubrique id, titre, id_parent parent </select>
				<from> FROM spip_rubriques </from>
				<where def="7"> WHERE id_parent = -parent-</where>
				<js evt="onselect" function="GetTreeSelect('tree-param0-',['id-param0-','lib-param0-'],[0,1])"/>
			</Query>
			<Query fonction="GetTreeChildren_FormSet">
				<col tag="id" parse="Integer"/>
				<col tag="titre"/>
				<col tag="parent" hidden="true"/>
				<select>SELECT id_rubrique id, titre, id_parent parent </select>
				<from> FROM spip_rubriques </from>
				<where def="9"> WHERE id_parent = -parent-</where>
				<js evt="onselect" function="GetTreeSelect('tree-param0-',['id-param0-','lib-param0-'],[0,1])"/>
			</Query>
		</Querys>
	</XmlParam>
	<XmlParam nom="GetTabForm">
		<Querys>
			<Query fonction="Grille_GetRubDon">
				<select>SELECT r.id_rubrique id </select>
				<from> FROM spip_rubriques r
					INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
					INNER JOIN spip_forms_donnees_articles da ON da.id_article = a.id_article 
				</from>
				<where> WHERE da.id_donnee = -id-</where>
			</Query>
			<Query fonction="Grille_GetXulTabFormRub">
				<select>SELECT id_article id, titre </select>
				<from> FROM spip_articles </from>
				<where> WHERE id_rubrique = -id- AND statut = 'prepa'</where>
				<dst>Art</dst>
			</Query>
			<Query fonction="Grille_GetXulTabFormEtab">
				<select>SELECT a.id_article id, a.titre</select>
				<from> 
					FROM spip_rubriques r
					INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
					INNER JOIN spip_forms_donnees_articles fda ON fda.id_article = a.id_article
					INNER JOIN spip_forms_donnees fd ON fd.id_donnee = fda.id_donnee AND fd.id_form = 55
				</from>
				<where> WHERE r.id_rubrique = -id- </where>
				<dst>Art</dst>
			</Query>
			<Query fonction="Grille_GetXulTabFormEspace">
				<select>SELECT a.id_article id, a.titre</select>
				<from> 
					FROM spip_rubriques r
					INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
					INNER JOIN spip_forms_donnees_articles fda ON fda.id_article = a.id_article
					INNER JOIN spip_forms_donnees fd ON fd.id_donnee = fda.id_donnee AND fd.id_form = 56
				</from>
				<where> WHERE r.id_rubrique = -id- </where>
				<dst>Art</dst>
			</Query>
			<Query fonction="Grille_GetXulTabFormEspaceInt">
				<select>SELECT a.id_article id, a.titre</select>
				<from> 
					FROM spip_rubriques r
					INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
					INNER JOIN spip_forms_donnees_articles fda ON fda.id_article = a.id_article
					INNER JOIN spip_forms_donnees fd ON fd.id_donnee = fda.id_donnee AND fd.id_form = 57
				</from>
				<where> WHERE r.id_rubrique = -id- </where>
				<dst>Art</dst>
			</Query>
			<Query fonction="Grille_GetXulTabFormBat">
				<select>SELECT a.id_article id, a.titre</select>
				<from> 
					FROM spip_rubriques r
					INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
					INNER JOIN spip_forms_donnees_articles fda ON fda.id_article = a.id_article
					INNER JOIN spip_forms_donnees fd ON fd.id_donnee = fda.id_donnee AND fd.id_form = 53
				</from>
				<where> WHERE r.id_rubrique = -id- </where>
				<dst>Art</dst>
			</Query>
			<Query fonction="Grille_GetXulTabFormporte">
				<select>SELECT DISTINCT a.id_article id, a.titre</select>
				<from> 
					FROM spip_rubriques r
					INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
					INNER JOIN spip_forms_donnees_articles fda ON fda.id_article = a.id_article
					INNER JOIN spip_forms_donnees fd ON fd.id_donnee = fda.id_donnee AND fd.id_form = 59
				</from>
				<where> WHERE r.id_rubrique = -id- </where>
				<dst>Art</dst>
			</Query>
			<Query fonction="Grille_GetXulTabFormParcelle">
				<select>SELECT a.id_article id, a.titre</select>
				<from> 
					FROM spip_rubriques r
					INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
					INNER JOIN spip_forms_donnees_articles fda ON fda.id_article = a.id_article
					INNER JOIN spip_forms_donnees fd ON fd.id_donnee = fda.id_donnee AND fd.id_form = 58
				</from>
				<where> WHERE r.id_rubrique = -id- </where>
				<dst>Art</dst>
			</Query>
			<Query fonction="Grille_GetXulTabFormEspaceExt">
				<select>SELECT a.id_article id, a.titre</select>
				<from> 
					FROM spip_rubriques r
					INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
					INNER JOIN spip_forms_donnees_articles fda ON fda.id_article = a.id_article
					INNER JOIN spip_forms_donnees fd ON fd.id_donnee = fda.id_donnee AND fd.id_form = 61
				</from>
				<where> WHERE r.id_rubrique = -id- </where>
				<dst>Art</dst>
			</Query>
			<Query fonction="Grille_GetXulTabFormEspaceExtParamGen">
				<select>SELECT a.id_article id, a.titre</select>
				<from> 
					FROM spip_rubriques r
					INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
					INNER JOIN spip_forms_donnees_articles fda ON fda.id_article = a.id_article
					INNER JOIN spip_forms_donnees fd ON fd.id_donnee = fda.id_donnee AND fd.id_form = 61
				</from>
				<where> WHERE r.id_rubrique = -id- </where>
				<dst>Art</dst>
			</Query>
			<Query fonction="Grille_GetXulTabFormNiveau">
				<select>SELECT a.id_article id, a.titre</select>
				<from> 
					FROM spip_rubriques r
					INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
					INNER JOIN spip_forms_donnees_articles fda ON fda.id_article = a.id_article
					INNER JOIN spip_forms_donnees fd ON fd.id_donnee = fda.id_donnee AND fd.id_form = 35
				</from>
				<where> WHERE r.id_rubrique = -id- </where>
				<dst>Art</dst>
			</Query>
			<Query fonction="Grille_GetXulTabFormEspace">
				<select>SELECT a.id_article id, a.titre</select>
				<from> 
					FROM spip_rubriques r
					INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
					INNER JOIN spip_forms_donnees_articles fda ON fda.id_article = a.id_article
					INNER JOIN spip_forms_donnees fd ON fd.id_donnee = fda.id_donnee AND fd.id_form = 56
				</from>
				<where> WHERE r.id_rubrique = -id- </where>
				<dst>Art</dst>
			</Query>
			<Query fonction="Grille_GetXulTabFormEspaceGen">
				<select>SELECT DISTINCT a.id_article id, a.titre</select>
				<from> 
					FROM spip_rubriques r
					INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
					INNER JOIN spip_forms_donnees_articles fda ON fda.id_article = a.id_article
					INNER JOIN spip_forms_donnees fd ON fd.id_donnee = fda.id_donnee AND fd.id_form = 59
				</from>
				<where> WHERE r.id_rubrique = -id- </where>
				<dst>Art</dst>
			</Query>
			<Query fonction="Grille_GetXulTabFormObjet">
				<select>SELECT a.id_article id, a.titre</select>
				<from> 
					FROM spip_rubriques r
					INNER JOIN spip_articles a ON a.id_rubrique = r.id_rubrique
					INNER JOIN spip_forms_donnees_articles fda ON fda.id_article = a.id_article
					INNER JOIN spip_forms_donnees fd ON fd.id_donnee = fda.id_donnee AND fd.id_form = 56
				</from>
				<where> WHERE r.id_rubrique = -id- </where>
				<dst>Art</dst>
			</Query>
			<Query fonction="Grille_GetXulTabFormGrille">
				<select>SELECT f.id_form id, f.titre, fda.id_article idArt </select>
				<from> FROM spip_forms f
INNER JOIN spip_forms_donnees fd ON fd.id_form = f.id_form
INNER JOIN spip_forms_donnees_articles fda ON fda.id_donnee = fd.id_donnee
				 </from>
				<where> WHERE fda.id_article = -id- GROUP BY f.id_form</where>
				<dst>Form</dst>
			</Query>
			<Query fonction="Grille_GetXulTabPanelsArt">
				<select>SELECT id_article id, titre </select>
				<from> FROM spip_articles </from>
				<where> WHERE id_article = -id-</where>
				<dst>Grille</dst>
			</Query>
			<Query fonction="Grille_GetXulTabPanelsForm">
				<select>SELECT da.id_donnee id </select>
				<from> FROM spip_forms_donnees_articles da
				INNER JOIN spip_forms_donnees fd ON fd.id_donnee = da.id_donnee
				 </from>
				<where> WHERE da.id_article =-src-  AND fd.id_form =-id-</where>
				<dst>Form</dst>
			</Query>
			<Query fonction="Grille_GetDonnee">
				<select>SELECT fda.id_article, dc.valeur, dc.champ, dc.id_donnee, fc.id_form grille, fc.titre, fc.type, fc.extra_info </select>
				<from> FROM spip_forms_donnees_champs dc
				INNER JOIN spip_forms_champs fc ON fc.champ = dc.champ
				INNER JOIN spip_forms_donnees_articles fda ON fda.id_donnee = dc.id_donnee
				 </from>
				<where> WHERE dc.id_donnee =-id- AND fc.id_form =-idGrille-
				ORDER BY dc.id_donnee, fc.rang, dc.champ</where>
				<js evt="onchange" type="textbox" function="SetVal('-param0-')"/>
				<js evt="onselect" type="radio" function="SetVal('-param0-');"/>
				<js evt="oncommand" type="multiple" function="SetVal('-param0-');"/>
				<js evt="oncommand" type="menu" function="SetVal('-param0-');"/>
			</Query>
			<Query fonction="Grille_GetChoixselect">
				<select>SELECT choix, titre</select>
				<from> FROM spip_forms_champs_choix </from>
				<where> WHERE champ ='-champ-' AND id_form =-id- ORDER BY rang</where>
			</Query>
			<Query fonction="Grille_GetChoixmultiple">
				<select>SELECT choix, titre</select>
				<from> FROM spip_forms_champs_choix </from>
				<where> WHERE champ ='-champ-' AND choix='-valeur-' AND id_form =-id- ORDER BY rang</where>
			</Query>
			<Query fonction="Grille_GetChoixmultipleNotIn">
				<select>SELECT choix, titre</select>
				<from> FROM spip_forms_champs_choix </from>
				<where> WHERE champ ='-champ-' AND choix NOT IN (-multiSelect-) AND id_form =-id- ORDER BY rang</where>
			</Query>
			<Query fonction="Grille_GetChoixmot">
				<select>SELECT id_mot choix, titre</select>
				<from> FROM spip_mots </from>
				<where> WHERE id_groupe =-extra_info- ORDER BY titre</where>
			</Query>
			<Query fonction="Grille_DelDonnee">
				<select>DELETE </select>
				<from> FROM spip_forms_donnees_champs </from>
				<where> WHERE id_donnee = -idDon-</where>
			</Query>
			<Query fonction="Grille_GetDonneeArtForm">
				<select>SELECT fda.id_donnee </select>
				<from> FROM spip_forms_donnees_articles fda
INNER JOIN spip_forms_donnees fd ON fd.id_donnee = fda.id_donnee AND fd.id_form = -idGrille-
 				</from>
				<where> WHERE fda.id_article = -idArt-</where>
			</Query>
			<Query fonction="Grille_DelGrilleDonnee">
				<select>DELETE </select>
				<from> FROM spip_forms_donnees </from>
				<where> WHERE id_donnee = -idDon-</where>
			</Query>
			<Query fonction="Grille_DelGrilleArtDonnee">
				<select>DELETE </select>
				<from> FROM spip_forms_donnees_articles </from>
				<where> WHERE id_donnee = -idDon-</where>
			</Query>
			<Query fonction="Grille_InsDonnee">
				<insert>INSERT INTO `spip_forms_donnees_champs` (`id_donnee`, `champ`, `valeur`, `maj`)</insert>
				<values> VALUES (-idDon-, '-champ-', '-val-', now()) </values>
			</Query>
			<Query fonction="Grille_DelChamp">
				<select>DELETE </select>
				<from> FROM spip_forms_donnees_champs </from>
				<where> WHERE id_donnee = -idDon- AND champ = '-champ-' AND valeur = '-choix-' </where>
			</Query>
			<Query fonction="Grille_InsChamp">
				<insert>INSERT INTO `spip_forms_donnees_champs` (`id_donnee`, `champ`, `valeur`, `maj`)</insert>
				<values> VALUES (-idDon-, '-champ-', '-val-', now()) </values>
			</Query>
			<Query fonction="Grille_GetGrillesPublie">
				<select>SELECT f.id_form, f.titre, a.id_article </select>
				<from> FROM spip_articles a
					INNER JOIN spip_forms_donnees_articles da ON da.id_article = a.id_article
					INNER JOIN spip_forms_donnees fd ON fd.id_donnee = da.id_donnee
					INNER JOIN spip_forms f ON f.id_form = fd.id_form
				 </from>
				<where> WHERE a.id_rubrique = -idRub- AND a.statut = 'publie'</where>
			</Query>
			<Query fonction="Grille_GetRubInLiens">
				<select>SELECT nom_site, url_site, url_syndic, descriptif idRub </select>
				<from> FROM spip_syndic </from>
				<where> WHERE id_rubrique = -idRub- AND statut = 'publie'</where>
			</Query>
			<Query fonction="Grille_GetChamps">
				<select>SELECT champ, rang, titre, '' valeur, '' id_donnee </select>
				<from> FROM spip_forms_champs </from>
				<where> WHERE id_form = -idGrille- </where>
			</Query>
			<Query fonction="Grille_AddQuestion">
				<select>SELECT fd.id_form, '59' FormRep, a.id_article, fdc1.valeur ref, fdc2.valeur question, '1' valdef </select>
				<from> FROM spip_articles a
INNER JOIN spip_forms_donnees_articles da ON da.id_article = a.id_article
INNER JOIN spip_forms_donnees fd ON fd.id_donnee = da.id_donnee AND fd.id_form = 54
INNER JOIN spip_forms_donnees_champs fdc1 ON fdc1.id_donnee = fd.id_donnee AND fdc1.champ = 'ligne_1'
INNER JOIN spip_forms_donnees_champs fdc2 ON fdc2.id_donnee = fd.id_donnee AND fdc2.champ = 'texte_1'
				</from>
				<where> WHERE a.id_rubrique =-idRubSrc- AND a.statut = 'publie'</where>
			</Query>
		</Querys>
	</XmlParam>
	<XmlParam nom="Workflow">
		<workflow srcObj="grille;champ" srcId="55;ligne_1" dstObj="Article" dstQuery="/XmlParams/XmlParam/Querys/Query[@fonction='update_ArtTitre']"/>
		<workflow srcObj="grille;champ" srcId="55;ligne_1" dstObj="Rubrique" dstQuery="/XmlParams/XmlParam/Querys/Query[@fonction='update_RubTitre']"/>
		<workflow srcObj="grille;champ" srcId="53;ligne_1" dstObj="Rubrique" dstQuery="/XmlParams/XmlParam/Querys/Query[@fonction='update_RubTitre']"/>
		<workflow srcObj="grille;champ" srcId="53;ligne_1" dstObj="Article" dstQuery="/XmlParams/XmlParam/Querys/Query[@fonction='update_ArtTitre']"/>
		<workflow srcObj="grille;champ" srcId="56;ligne_1" dstObj="Rubrique" dstQuery="/XmlParams/XmlParam/Querys/Query[@fonction='update_RubTitre']"/>
		<workflow srcObj="grille;champ" srcId="56;ligne_1" dstObj="Article" dstQuery="/XmlParams/XmlParam/Querys/Query[@fonction='update_ArtTitre']"/>
		<workflow srcObj="grille;champ" srcId="57;ligne_1" dstObj="Rubrique" dstQuery="/XmlParams/XmlParam/Querys/Query[@fonction='update_RubTitre']"/>
		<workflow srcObj="grille;champ" srcId="57;ligne_1" dstObj="Article" dstQuery="/XmlParams/XmlParam/Querys/Query[@fonction='update_ArtTitre']"/>
		<workflow srcObj="grille;champ" srcId="58;ligne_1" dstObj="Rubrique" dstQuery="/XmlParams/XmlParam/Querys/Query[@fonction='update_RubTitre']"/>
		<workflow srcObj="grille;champ" srcId="58;ligne_1" dstObj="Article" dstQuery="/XmlParams/XmlParam/Querys/Query[@fonction='update_ArtTitre']"/>
		<workflow srcObj="grille;champ" srcId="35;ligne_1" dstObj="Rubrique" dstQuery="/XmlParams/XmlParam/Querys/Query[@fonction='update_RubTitre']"/>
		<workflow srcObj="grille;champ" srcId="35;ligne_1" dstObj="Article" dstQuery="/XmlParams/XmlParam/Querys/Query[@fonction='update_ArtTitre']"/>
		<workflow srcObj="grille;champ;valeur" srcId="59;mot_1" srcCheckVal="2" dstObj="Rubrique" trsId="60" dstQuery="AddNewArtGrille" />
		<Querys>
			<Query fonction="update_ArtTitre">
				<update>UPDATE spip_articles </update>
				<set> SET titre = '-param-'	</set>
				<where> WHERE id_article = -id-</where>
			</Query>
			<Query fonction="update_RubTitre">
				<update>UPDATE spip_rubriques </update>
				<set> SET titre = '-param-'	</set>
				<where> WHERE id_rubrique = -id-</where>
			</Query>
			<Query fonction="GetIdRubrique">
				<select>SELECT a.id_rubrique id </select>
				<from> FROM spip_articles a INNER JOIN spip_forms_donnees_articles da ON da.id_article = a.id_article</from>
				<where> WHERE da.id_donnee = -id-</where>
			</Query>
			<Query fonction="GetIdArticle">
				<select>SELECT id_article id </select>
				<from> FROM spip_forms_donnees_articles </from>
				<where> WHERE id_donnee = -id-</where>
			</Query>
		</Querys>
	</XmlParam>
</XmlParams>
